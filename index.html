<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Extranet UNDAC Â· Sistema AcadÃ©mico</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .step.active {
      border-color: #1e3a8a;
      background: #dbeafe;
    }
    .hidden { display: none !important; }
    .fade-in {
      animation: fadeIn 0.3s ease-in;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .btn-nav {
      padding: 0.5rem 1rem;
      transition: all 0.2s;
    }
    .btn-nav:hover {
      background: rgba(255,255,255,0.1);
    }
  </style>
</head>
<body class="bg-slate-100 text-slate-800">

  <!-- PANTALLA DE LOGIN -->
  <div id="loginScreen" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-900 via-blue-800 to-blue-600 p-4">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md p-8">
      <div class="flex justify-center mb-6">
        <div class="w-24 h-24 rounded-full bg-blue-100 flex items-center justify-center">
          <div class="w-20 h-20 rounded-full bg-white border-4 border-blue-600 flex items-center justify-center text-4xl font-bold text-blue-600">U</div>
        </div>
      </div>
      
      <h1 class="text-3xl font-bold text-center text-blue-900 mb-2">BIENVENIDO</h1>
      <p class="text-center text-slate-600 mb-6">Inicie sesiÃ³n</p>
      
      <form id="loginForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-2">Seleccione un Rol</label>
          <select id="rolSelect" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <option value="">Seleccione un Rol</option>
            <option value="Alumno">Alumno</option>
            <option value="Docente">Docente</option>
            <option value="AdmisiÃ³n">AdmisiÃ³n</option>
            <option value="Bienestar Universitario">Bienestar Universitario</option>
            <option value="ContralorÃ­a">ContralorÃ­a</option>
            <option value="CurrÃ­culo">CurrÃ­culo</option>
            <option value="Decano Facultad">Decano Facultad</option>
            <option value="Egresado">Egresado</option>
            <option value="EstadÃ­stica">EstadÃ­stica</option>
            <option value="InformÃ¡tica">InformÃ¡tica</option>
            <option value="PedagogÃ­a">PedagogÃ­a</option>
            <option value="Rector">Rector</option>
            <option value="Registro Facultad">Registro Facultad</option>
            <option value="Registros Central">Registros Central</option>
            <option value="Soporte">Soporte</option>
            <option value="ViceAcademico">ViceAcademico</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-2">CÃ³digo Universitario</label>
          <input type="text" id="codigoInput" placeholder="2144403166" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-2">ContraseÃ±a</label>
          <input type="password" id="passwordInput" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
        </div>
        
        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition">
          Ingresar
        </button>
        
        <p class="text-center text-sm text-slate-500">Â¿Olvidaste tu contraseÃ±a?</p>
      </form>
    </div>
  </div>

  <!-- APLICACIÃ“N PRINCIPAL -->
  <div id="appScreen" class="hidden">
    <!-- Barra superior AZUL FUNCIONAL -->
    <header class="bg-[#2f5597] text-white shadow-lg">
      <div class="px-4 py-3 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 rounded-full bg-white flex items-center justify-center">
            <span class="text-2xl">ğŸ‘¤</span>
          </div>
          <div class="leading-tight">
            <div class="text-base font-bold">UNDAC 2.0</div>
            <div class="text-xs opacity-90">acadÃ©mico</div>
          </div>
          <div class="ml-4 border-l border-white/30 pl-4">
            <div class="text-sm font-semibold" id="headerNombre">POMA PALACIOS, Alisson Naily</div>
            <div class="text-xs opacity-90" id="headerPrograma">Adscrito Escuela IngenierÃ­a de Sistemas y ComputaciÃ³n</div>
          </div>
        </div>
        <nav class="flex items-center gap-1 text-sm">
          <button onclick="showModule('inicio')" class="btn-nav rounded flex items-center gap-2">
            <span>ğŸ </span>Inicio
          </button>
          <button onclick="showModule('perfil')" class="btn-nav rounded flex items-center gap-2">
            <span>ğŸ‘¤</span>Mi Perfil
          </button>
          <button onclick="showModule('pagos')" class="btn-nav rounded flex items-center gap-2">
            <span>ğŸ’³</span>Pagos en lÃ­nea
          </button>
          <button onclick="showModule('aula')" class="btn-nav rounded flex items-center gap-2">
            <span>ğŸ–¥ï¸</span>Aula Virtual
          </button>
          <button onclick="cerrarSesion()" class="btn-nav rounded flex items-center gap-2">
            <span>â»</span>Cerrar SesiÃ³n
          </button>
        </nav>
      </div>
    </header>

    <!-- MÃ³dulo Inicio -->
    <div id="moduloInicio" class="module hidden min-h-screen">
      <div class="max-w-7xl mx-auto px-4 py-8">
        <h2 class="text-3xl font-bold mb-6">Panel de Inicio</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
          <div class="bg-gradient-to-br from-blue-500 to-blue-700 text-white p-6 rounded-xl shadow-lg hover:shadow-xl transition cursor-pointer" onclick="showModule('arco')">
            <div class="text-5xl mb-4">ğŸ›¡ï¸</div>
            <h3 class="font-bold text-xl mb-2">Mesa de Partes Virtual</h3>
            <p class="text-blue-100 text-sm mb-3">Derecho al Olvido (ARCO)</p>
            <div class="text-xs bg-white/20 rounded px-2 py-1 inline-block">ProtecciÃ³n de Datos</div>
          </div>
          
          <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
            <div class="text-4xl mb-3">ğŸ“š</div>
            <h3 class="font-semibold text-lg mb-2">Recursos AcadÃ©micos</h3>
            <p class="text-sm text-slate-600">Materiales de estudio y documentaciÃ³n</p>
          </div>
          
          <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
            <div class="text-4xl mb-3">ğŸ“Š</div>
            <h3 class="font-semibold text-lg mb-2">EstadÃ­sticas</h3>
            <p class="text-sm text-slate-600">Seguimiento acadÃ©mico</p>
          </div>
          
          <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
            <div class="text-4xl mb-3">ğŸ“…</div>
            <h3 class="font-semibold text-lg mb-2">Calendario</h3>
            <p class="text-sm text-slate-600">Horarios y eventos</p>
          </div>
          
          <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
            <div class="text-4xl mb-3">ğŸ“</div>
            <h3 class="font-semibold text-lg mb-2">TrÃ¡mites</h3>
            <p class="text-sm text-slate-600">GestiÃ³n de documentos</p>
          </div>
          
          <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
            <div class="text-4xl mb-3">ğŸ“¢</div>
            <h3 class="font-semibold text-lg mb-2">Avisos</h3>
            <p class="text-sm text-slate-600">Comunicados importantes</p>
          </div>
        </div>

        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
          <h4 class="font-semibold mb-2 flex items-center gap-2">
            <span>ğŸ“Œ</span> Acceso RÃ¡pido
          </h4>
          <p class="text-sm text-slate-700">Para gestionar tus datos personales y ejercer tu derecho al olvido, accede a <strong class="text-blue-600 cursor-pointer" onclick="showModule('arco')">Mesa de Partes Virtual - Derecho al Olvido</strong></p>
        </div>
      </div>
    </div>

    <!-- MÃ³dulo Mi Perfil -->
    <div id="moduloPerfil" class="module hidden min-h-screen">
      <div class="max-w-5xl mx-auto px-4 py-8">
        <h2 class="text-3xl font-bold mb-6">Mi Perfil</h2>
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <div class="bg-white rounded-xl shadow p-6">
            <div class="flex justify-center mb-4">
              <div class="w-32 h-32 rounded-full bg-blue-100 flex items-center justify-center text-6xl">ğŸ‘¤</div>
            </div>
            <div class="text-center">
              <div class="font-bold text-lg mb-1" id="perfilNombre"></div>
              <div class="text-sm text-slate-600" id="perfilCodigo"></div>
            </div>
          </div>
          
          <div class="lg:col-span-2 bg-white rounded-xl shadow p-6">
            <h3 class="font-bold text-xl mb-4">InformaciÃ³n Personal</h3>
            <div class="space-y-3">
              <div class="flex justify-between py-2 border-b">
                <span class="font-semibold text-slate-600">CÃ³digo:</span>
                <span id="perfilCodigo2"></span>
              </div>
              <div class="flex justify-between py-2 border-b">
                <span class="font-semibold text-slate-600">Rol:</span>
                <span id="perfilRol"></span>
              </div>
              <div class="flex justify-between py-2 border-b">
                <span class="font-semibold text-slate-600">Correo Institucional:</span>
                <span class="text-blue-600">nombre.apellido@undac.edu.pe</span>
              </div>
              <div class="flex justify-between py-2 border-b">
                <span class="font-semibold text-slate-600">Estado:</span>
                <span class="text-green-600 font-semibold">â— Activo</span>
              </div>
              <div class="flex justify-between py-2">
                <span class="font-semibold text-slate-600">Ãšltimo acceso:</span>
                <span id="ultimoAcceso"></span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
          <h4 class="font-semibold mb-2">ğŸ” Privacidad y Datos</h4>
          <p class="text-sm text-slate-700 mb-3">Gestiona tus datos personales y ejerce tus derechos ARCO</p>
          <button onclick="showModule('arco')" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700">
            Ir a Derecho al Olvido
          </button>
        </div>
      </div>
    </div>

    <!-- MÃ³dulo Pagos -->
    <div id="moduloPagos" class="module hidden min-h-screen">
      <div class="max-w-6xl mx-auto px-4 py-8">
        <h2 class="text-3xl font-bold mb-6">Pagos en LÃ­nea</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
          <div class="bg-green-50 border border-green-200 rounded-lg p-4">
            <div class="text-2xl font-bold text-green-600">S/. 0.00</div>
            <div class="text-sm text-slate-600">Pagos realizados</div>
          </div>
          <div class="bg-red-50 border border-red-200 rounded-lg p-4">
            <div class="text-2xl font-bold text-red-600">S/. 450.00</div>
            <div class="text-sm text-slate-600">Deuda pendiente</div>
          </div>
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <div class="text-2xl font-bold text-blue-600">3</div>
            <div class="text-sm text-slate-600">Conceptos pendientes</div>
          </div>
        </div>
        
        <div class="bg-white rounded-xl shadow p-6">
          <h3 class="font-bold text-xl mb-4">Conceptos de Pago</h3>
          <div class="space-y-3">
            <div class="flex items-center justify-between p-4 border rounded-lg hover:bg-slate-50">
              <div>
                <div class="font-semibold">MatrÃ­cula 2025-I</div>
                <div class="text-sm text-slate-600">Vencimiento: 15/03/2025</div>
              </div>
              <div class="text-right">
                <div class="font-bold text-lg">S/. 200.00</div>
                <button class="mt-1 px-4 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700">Pagar</button>
              </div>
            </div>
            
            <div class="flex items-center justify-between p-4 border rounded-lg hover:bg-slate-50">
              <div>
                <div class="font-semibold">Mensualidad Marzo</div>
                <div class="text-sm text-slate-600">Vencimiento: 10/03/2025</div>
              </div>
              <div class="text-right">
                <div class="font-bold text-lg">S/. 150.00</div>
                <button class="mt-1 px-4 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700">Pagar</button>
              </div>
            </div>
            
            <div class="flex items-center justify-between p-4 border rounded-lg hover:bg-slate-50">
              <div>
                <div class="font-semibold">Certificado de Estudios</div>
                <div class="text-sm text-slate-600">TrÃ¡mite pendiente</div>
              </div>
              <div class="text-right">
                <div class="font-bold text-lg">S/. 100.00</div>
                <button class="mt-1 px-4 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700">Pagar</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- MÃ³dulo Aula Virtual -->
    <div id="moduloAula" class="module hidden min-h-screen">
      <div class="max-w-6xl mx-auto px-4 py-8">
        <h2 class="text-3xl font-bold mb-6">Aula Virtual</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
          <div class="bg-white rounded-xl shadow p-6 hover:shadow-lg transition">
            <div class="flex items-center gap-3 mb-3">
              <div class="w-12 h-12 rounded bg-blue-100 flex items-center justify-center text-2xl">ğŸ’»</div>
              <div>
                <div class="font-semibold">ProgramaciÃ³n I</div>
                <div class="text-xs text-slate-500">Prof. GarcÃ­a LÃ³pez</div>
              </div>
            </div>
            <div class="text-sm text-slate-600 mb-3">3 tareas pendientes</div>
            <button class="w-full px-4 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700">Acceder</button>
          </div>
          
          <div class="bg-white rounded-xl shadow p-6 hover:shadow-lg transition">
            <div class="flex items-center gap-3 mb-3">
              <div class="w-12 h-12 rounded bg-green-100 flex items-center justify-center text-2xl">ğŸ“Š</div>
              <div>
                <div class="font-semibold">Base de Datos</div>
                <div class="text-xs text-slate-500">Prof. RamÃ­rez Cruz</div>
              </div>
            </div>
            <div class="text-sm text-slate-600 mb-3">1 examen disponible</div>
            <button class="w-full px-4 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700">Acceder</button>
          </div>
          
          <div class="bg-white rounded-xl shadow p-6 hover:shadow-lg transition">
            <div class="flex items-center gap-3 mb-3">
              <div class="w-12 h-12 rounded bg-purple-100 flex items-center justify-center text-2xl">ğŸŒ</div>
              <div>
                <div class="font-semibold">Redes I</div>
                <div class="text-xs text-slate-500">Prof. Torres MÃ©ndez</div>
              </div>
            </div>
            <div class="text-sm text-slate-600 mb-3">Al dÃ­a</div>
            <button class="w-full px-4 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700">Acceder</button>
          </div>
        </div>
        
        <div class="bg-white rounded-xl shadow p-6">
          <h3 class="font-bold text-xl mb-4">PrÃ³ximas Actividades</h3>
          <div class="space-y-3">
            <div class="flex items-center gap-3 p-3 border-l-4 border-red-500 bg-red-50 rounded">
              <div class="text-2xl">â°</div>
              <div>
                <div class="font-semibold">Examen de Base de Datos</div>
                <div class="text-sm text-slate-600">Vence: MaÃ±ana 18:00</div>
              </div>
            </div>
            
            <div class="flex items-center gap-3 p-3 border-l-4 border-yellow-500 bg-yellow-50 rounded">
              <div class="text-2xl">ğŸ“</div>
              <div>
                <div class="font-semibold">Tarea: Algoritmos de Ordenamiento</div>
                <div class="text-sm text-slate-600">Vence: 10/10/2025 23:59</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- MÃ³dulo ARCO - Derecho al Olvido -->
    <div id="moduloArco" class="module hidden">
      <div class="bg-gradient-to-r from-[#1e3a8a] to-[#2563eb] text-white">
        <div class="max-w-7xl mx-auto px-4 py-4">
          <div class="flex items-center justify-between">
            <div>
              <h2 class="text-xl font-bold mb-1">Mesa de Partes Virtual Â· Derecho al Olvido</h2>
              <div class="text-sm opacity-90">TrÃ¡mite ARCO â€“ CancelaciÃ³n/SupresiÃ³n de Datos Personales</div>
            </div>
            <div class="text-right text-xs">
              <div>SLA: 3 dÃ­as (1ra respuesta)</div>
              <div>20 dÃ­as (cierre del expediente)</div>
            </div>
          </div>
        </div>
      </div>

      <main class="max-w-7xl mx-auto px-4 py-5 grid grid-cols-1 lg:grid-cols-12 gap-5">
        <!-- Lateral -->
        <aside class="lg:col-span-3 space-y-3">
          <div class="bg-white rounded-xl border border-slate-200 p-4">
            <div class="flex items-center gap-3 mb-3">
              <div class="w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 grid place-items-center text-2xl text-white">ğŸ‘¤</div>
              <div class="text-sm">
                <div class="font-semibold" id="arcoCodigo"></div>
                <div class="text-slate-500" id="arcoRol"></div>
              </div>
            </div>
            <hr class="my-3">
            <div class="text-xs text-slate-600 space-y-1">
              <div>ğŸ“§ nombre.apellido@undac.edu.pe</div>
              <div>ğŸ• Ãšltima sesiÃ³n: <span id="arcoUltimoAcceso"></span></div>
            </div>
          </div>

          <div class="bg-white rounded-xl border border-slate-200 p-3">
            <div class="text-sm font-semibold mb-3 flex items-center gap-2">
              <span>âš¡</span>Accesos rÃ¡pidos
            </div>
            <div class="flex flex-col gap-2 text-sm">
              <button onclick="goPaso(0)" class="px-3 py-2 rounded border border-slate-200 hover:border-blue-600 hover:bg-blue-50 transition text-left">
                â• Nueva solicitud
              </button>
              <button onclick="goPaso(2)" class="px-3 py-2 rounded border border-slate-200 hover:border-blue-600 hover:bg-blue-50 transition text-left">
                ğŸ—‚ï¸ Mis solicitudes
              </button>
              <button onclick="showPanel()" class="px-3 py-2 rounded border border-slate-200 hover:border-blue-600 hover:bg-blue-50 transition text-left">
                ğŸ“Š Panel de mÃ©tricas
              </button>
            </div>
          </div>

          <div class="bg-blue-50 border border-blue-200 rounded-xl p-3">
            <div class="text-xs font-semibold mb-2 text-blue-900">â„¹ï¸ InformaciÃ³n</div>
            <p class="text-xs text-blue-800">El derecho al olvido te permite solicitar la eliminaciÃ³n o anonimizaciÃ³n de tus datos personales en los sistemas de UNDAC.</p>
          </div>
        </aside>

        <!-- Wizard -->
        <section class="lg:col-span-9">
          <ol class="grid grid-cols-3 gap-3 mb-4">
            <li class="step active rounded-xl border p-3 bg-white cursor-pointer" onclick="goPaso(0)">
              <div class="text-xs text-slate-500 mb-1">Paso 1</div>
              <div class="font-semibold">ğŸ“ Solicitar</div>
              <div class="text-xs text-slate-600 mt-1">Indica dÃ³nde actuar</div>
            </li>
            <li class="step rounded-xl border border-slate-200 p-3 bg-white cursor-pointer" onclick="goPaso(1)">
              <div class="text-xs text-slate-500 mb-1">Paso 2</div>
              <div class="font-semibold">âœ… Revisar & Asegurar</div>
              <div class="text-xs text-slate-600 mt-1">Confirma y ejecuta</div>
            </li>
            <li class="step rounded-xl border border-slate-200 p-3 bg-white cursor-pointer" onclick="goPaso(2)">
              <div class="text-xs text-slate-500 mb-1">Paso 3</div>
              <div class="font-semibold">ğŸ‘ï¸ Transparencia</div>
              <div class="text-xs text-slate-600 mt-1">Seguimiento y constancia</div>
            </li>
          </ol>

          <!-- Paso 1: Solicitar -->
          <div id="paso1" class="bg-white rounded-xl border p-6 shadow-lg">
            <div class="flex items-start gap-3 mb-4">
              <div class="text-4xl">ğŸ›¡ï¸</div>
              <div>
                <h3 class="text-2xl font-bold mb-2">Solicitud de Derecho al Olvido</h3>
                <p class="text-sm text-slate-600">Selecciona los sistemas donde deseas ejercer tu derecho ARCO (Acceso, RectificaciÃ³n, CancelaciÃ³n y OposiciÃ³n)</p>
              </div>
            </div>
            
            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
              <div class="flex items-start gap-2">
                <span class="text-xl">âš ï¸</span>
                <div class="text-sm">
                  <div class="font-semibold text-yellow-900 mb-1">Importante:</div>
                  <ul class="text-yellow-800 space-y-1 text-xs">
                    <li>â€¢ Las notas, actas y registro acadÃ©mico NO se eliminan (archivo obligatorio)</li>
                    <li>â€¢ El proceso puede tardar hasta 20 dÃ­as hÃ¡biles</li>
                    <li>â€¢ RecibirÃ¡s notificaciones en cada etapa del proceso</li>
                  </ul>
                </div>
              </div>
            </div>

            <form id="formSolicitud" class="space-y-6">
              <div>
                <label class="block font-semibold mb-3 text-lg">ğŸ“ Â¿DÃ³nde quieres que atendamos tu pedido?</label>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                  <label class="flex items-start gap-3 p-4 border-2 border-slate-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition">
                    <input type="checkbox" class="sistemaCb mt-1" value="Correo Institucional" data-accion="Baja de cuenta">
                    <div>
                      <div class="font-semibold">ğŸ“§ Correo Institucional</div>
                      <div class="text-xs text-slate-600">Baja completa de cuenta</div>
                    </div>
                  </label>

                  <label class="flex items-start gap-3 p-4 border-2 border-slate-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition">
                    <input type="checkbox" class="sistemaCb mt-1" value="Aula Virtual" data-accion="Anonimizar nombre en foros/tareas">
                    <div>
                      <div class="font-semibold">ğŸ“ Aula Virtual (LMS)</div>
                      <div class="text-xs text-slate-600">Anonimizar nombre en foros y tareas</div>
                    </div>
                  </label>

                  <label class="flex items-start gap-3 p-4 border-2 border-slate-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition">
                    <input type="checkbox" class="sistemaCb mt-1" value
                      ="Biblioteca Digital" data-accion="Eliminar historial de prÃ©stamos">
                    <div>
                      <div class="font-semibold">ğŸ“š Biblioteca Digital</div>
                      <div class="text-xs text-slate-600">Eliminar historial de prÃ©stamos</div>
                    </div>
                  </label>

                  <label class="flex items-start gap-3 p-4 border-2 border-slate-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition">
                    <input type="checkbox" class="sistemaCb mt-1" value="Sistema de Pagos" data-accion="Anonimizar datos de contacto">
                    <div>
                      <div class="font-semibold">ğŸ’³ Sistema de Pagos</div>
                      <div class="text-xs text-slate-600">Anonimizar datos de contacto</div>
                    </div>
                  </label>

                  <label class="flex items-start gap-3 p-4 border-2 border-slate-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition">
                    <input type="checkbox" class="sistemaCb mt-1" value="Portal Web PÃºblico" data-accion="Eliminar publicaciones/comentarios">
                    <div>
                      <div class="font-semibold">ğŸŒ Portal Web PÃºblico</div>
                      <div class="text-xs text-slate-600">Eliminar publicaciones y comentarios</div>
                    </div>
                  </label>

                  <label class="flex items-start gap-3 p-4 border-2 border-slate-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 cursor-pointer transition">
                    <input type="checkbox" class="sistemaCb mt-1" value="Sistema de Encuestas" data-accion="Anonimizar respuestas">
                    <div>
                      <div class="font-semibold">ğŸ“Š Sistema de Encuestas</div>
                      <div class="text-xs text-slate-600">Anonimizar respuestas</div>
                    </div>
                  </label>
                </div>
              </div>

              <div>
                <label class="block font-semibold mb-2">ğŸ“ Motivo de la solicitud (opcional)</label>
                <textarea id="motivoSolicitud" rows="4" class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Explica brevemente por quÃ© deseas ejercer tu derecho al olvido..."></textarea>
              </div>

              <div class="flex items-start gap-3 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                <input type="checkbox" id="aceptoTerminos" required class="mt-1">
                <label for="aceptoTerminos" class="text-sm text-slate-700">
                  Acepto que he leÃ­do y entiendo que este proceso puede tardar hasta 20 dÃ­as hÃ¡biles y que algunos datos acadÃ©micos no podrÃ¡n ser eliminados por obligaciones legales de la universidad.
                </label>
              </div>

              <div class="flex gap-3 justify-end">
                <button type="button" onclick="showModule('inicio')" class="px-6 py-3 border border-slate-300 rounded-lg hover:bg-slate-50 transition">
                  Cancelar
                </button>
                <button type="submit" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-semibold">
                  Continuar al paso 2 â†’
                </button>
              </div>
            </form>
          </div>

          <!-- Paso 2: Revisar & Asegurar -->
<div id="paso2" class="bg-white rounded-xl border p-6 shadow-lg hidden">
  <div class="flex items-start gap-3 mb-4">
    <div class="text-4xl">âœ…</div>
    <div>
      <h3 class="text-2xl font-bold mb-2">RevisiÃ³n rÃ¡pida y seguridad</h3>
      <p class="text-sm text-slate-600">Verifica los detalles de tu solicitud antes de enviarla</p>
    </div>
  </div>

  <div class="space-y-4 mb-6">
    <div class="bg-slate-50 rounded-lg p-4">
      <div class="font-semibold mb-2">Sistemas seleccionados:</div>
      <div id="resumenSistemas" class="space-y-2"></div>
    </div>

    <div class="bg-slate-50 rounded-lg p-4">
      <div class="font-semibold mb-2">Motivo:</div>
      <div id="resumenMotivo" class="text-sm text-slate-700"></div>
    </div>

    <!-- Finalidad del tratamiento -->
    <div class="border border-slate-200 rounded-lg p-4">
      <div class="font-semibold mb-3">Finalidad del tratamiento</div>
      <div class="space-y-2">
        <label class="flex items-center gap-2 text-sm">
          <input type="checkbox" id="finalidadArco" checked disabled class="rounded">
          <span class="text-slate-600">Atender este trÃ¡mite ARCO</span>
        </label>
        <label class="flex items-center gap-2 text-sm">
          <input type="checkbox" id="finalidadEstadisticas" class="rounded">
          <span class="text-slate-600">EstadÃ­sticas internas (datos anonimizados)</span>
        </label>
        <label class="flex items-center gap-2 text-sm">
          <input type="checkbox" id="finalidadBolsa" class="rounded">
          <span class="text-slate-600">Bolsa de egresados (consentimiento)</span>
        </label>
      </div>
    </div>

    <!-- PolÃ­tica de almacenamiento -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="border border-slate-200 rounded-lg p-4">
        <div class="font-semibold mb-3">PolÃ­tica de almacenamiento</div>
        <label class="block text-sm font-medium text-slate-700 mb-2">Plazo de supresiÃ³n</label>
        <select id="plazoSupresion" class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500">
          <option value="inmediata">Baja inmediata</option>
          <option value="30dias">30 dÃ­as</option>
          <option value="90dias">90 dÃ­as</option>
          <option value="180dias">180 dÃ­as</option>
        </select>
        <p class="text-xs text-slate-500 mt-2">Backups: supresiÃ³n diferida y no reintroducciÃ³n al restaurar.</p>
      </div>

      <!-- RectificaciÃ³n previa -->
      <div class="border border-slate-200 rounded-lg p-4">
        <div class="flex items-center justify-between mb-3">
          <div class="font-semibold">RectificaciÃ³n previa</div>
          <button type="button" onclick="limpiarRectificacion()" class="text-xs text-blue-600 hover:text-blue-700">Limpiar campos</button>
        </div>
        <div class="space-y-2">
          <div>
            <label class="block text-xs font-medium text-slate-600 mb-1">Correo institucional</label>
            <input 
              type="email" 
              id="rectCorreo" 
              placeholder="nombre.apellido@undac.edu.pe" 
              class="w-full px-3 py-2 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-slate-50"
            >
            <p class="text-xs text-slate-500 mt-1">Correo actual que deseas actualizar antes de la supresiÃ³n</p>
          </div>
          <div>
            <label class="block text-xs font-medium text-slate-600 mb-1">Alias en foros (Aula Virtual)</label>
            <input 
              type="text" 
              id="rectAlias" 
              placeholder="UsuarioUNDAC" 
              class="w-full px-3 py-2 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            >
            <p class="text-xs text-slate-500 mt-1">Nombre visible en foros y actividades del aula virtual</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Seguridad -->
    <div class="border border-slate-200 rounded-lg p-4">
      <div class="font-semibold mb-3">Seguridad</div>
      <div class="space-y-2">
        <label class="flex items-center gap-2 text-sm">
          <input type="checkbox" id="seguridadMFA" class="rounded">
          <span class="text-slate-600">Activar segundo factor (MFA)</span>
        </label>
        <label class="flex items-center gap-2 text-sm">
          <input type="checkbox" id="seguridadCifrado" checked disabled class="rounded">
          <span class="text-slate-600">Cifrado en trÃ¡nsito y reposo</span>
        </label>
      </div>
    </div>

    <!-- VerificaciÃ³n de identidad -->
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
      <div class="font-semibold mb-2 text-blue-900">ğŸ” VerificaciÃ³n de identidad</div>
      <p class="text-sm text-blue-800 mb-3">Por seguridad, ingresa tu contraseÃ±a para confirmar esta acciÃ³n</p>
      <input type="password" id="confirmPassword" class="w-full px-4 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="ContraseÃ±a" required>
    </div>

    <!-- Botones de documentos -->
    <div class="border border-slate-200 rounded-lg p-4 bg-slate-50">
      <div class="font-semibold mb-3">ğŸ“„ Documentos disponibles</div>
      <div class="flex flex-wrap gap-3">
        <button type="button" onclick="generarCartaModelo()" class="px-4 py-2 bg-white border border-slate-300 rounded-lg text-sm hover:bg-slate-50 transition flex items-center gap-2">
          <span>ğŸ“</span> Carta modelo para terceros
        </button>
        <button type="button" onclick="generarConstancia()" class="px-4 py-2 bg-white border border-slate-300 rounded-lg text-sm hover:bg-slate-50 transition flex items-center gap-2">
          <span>ğŸ“œ</span> Generar constancia
        </button>
      </div>
    </div>

    <!-- BotÃ³n Guardar cambios -->
    <div class="flex justify-end">
      <button type="button" onclick="guardarCambiosRevision()" class="px-6 py-2 bg-slate-200 text-slate-700 rounded-lg text-sm hover:bg-slate-300 transition font-semibold">
        Guardar cambios
      </button>
    </div>
  </div>

  <div class="flex gap-3 justify-end">
    <button type="button" onclick="goPaso(0)" class="px-6 py-3 border border-slate-300 rounded-lg hover:bg-slate-50 transition">
      â† Volver
    </button>
    <button type="button" onclick="enviarSolicitud()" class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-semibold">
      âœ“ Confirmar y Enviar
    </button>
  </div>
</div>

          <!-- Paso 3: Transparencia -->
          <div id="paso3" class="bg-white rounded-xl border p-6 shadow-lg hidden">
            <div class="flex items-start gap-3 mb-4">
              <div class="text-4xl">ğŸ‘ï¸</div>
              <div>
                <h3 class="text-2xl font-bold mb-2">Seguimiento y Transparencia</h3>
                <p class="text-sm text-slate-600">Visualiza el estado de tus solicitudes</p>
              </div>
            </div>

            <div id="listaSolicitudes" class="space-y-3">
              <div class="bg-slate-50 rounded-lg p-4 text-center text-slate-500">
                No tienes solicitudes previas. Crea una nueva solicitud en el Paso 1.
              </div>
            </div>

            <div class="mt-6 flex gap-3 justify-end">
              <button type="button" onclick="goPaso(0)" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                Nueva solicitud
              </button>
            </div>
          </div>

          <!-- Panel de MÃ©tricas -->
          <div id="panelMetricas" class="bg-white rounded-xl border p-6 shadow-lg hidden">
            <div class="flex items-start justify-between mb-4">
              <div class="flex items-start gap-3">
                <div class="text-4xl">ğŸ“Š</div>
                <div>
                  <h3 class="text-2xl font-bold mb-2">Panel de MÃ©tricas</h3>
                  <p class="text-sm text-slate-600">EstadÃ­sticas del sistema de Derecho al Olvido</p>
                </div>
              </div>
              <button onclick="hidePanelMetricas()" class="text-2xl hover:bg-slate-100 rounded px-2">Ã—</button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
              <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <div class="text-3xl font-bold text-blue-600">0</div>
                <div class="text-sm text-slate-600">Solicitudes totales</div>
              </div>
              <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                <div class="text-3xl font-bold text-green-600">0</div>
                <div class="text-sm text-slate-600">Completadas</div>
              </div>
              <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                <div class="text-3xl font-bold text-yellow-600">0</div>
                <div class="text-sm text-slate-600">En proceso</div>
              </div>
            </div>

            <div class="bg-slate-50 rounded-lg p-4">
              <div class="font-semibold mb-2">Tiempo promedio de respuesta</div>
              <div class="text-2xl font-bold text-slate-700">N/A</div>
              <div class="text-xs text-slate-500 mt-1">AÃºn no hay datos suficientes</div>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <script>
    // Variables globales
    let usuarioActual = {
      rol: '',
      codigo: '',
      nombre: 'POMA PALACIOS, Alisson Naily'
    };
    let solicitudesArco = [];
    let solicitudActual = {
      sistemas: [],
      motivo: ''
    };

    // Login
    document.getElementById('loginForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const rol = document.getElementById('rolSelect').value;
      const codigo = document.getElementById('codigoInput').value;
      const password = document.getElementById('passwordInput').value;

      if (!rol) {
        alert('Por favor selecciona un rol');
        return;
      }

      usuarioActual.rol = rol;
      usuarioActual.codigo = codigo;

      document.getElementById('loginScreen').classList.add('hidden');
      document.getElementById('appScreen').classList.remove('hidden');
      
      actualizarDatosUsuario();
      showModule('inicio');
    });

    function actualizarDatosUsuario() {
      const ahora = new Date().toLocaleString('es-PE');
      
      document.getElementById('headerNombre').textContent = usuarioActual.nombre;
      document.getElementById('perfilNombre').textContent = usuarioActual.nombre;
      document.getElementById('perfilCodigo').textContent = usuarioActual.codigo;
      document.getElementById('perfilCodigo2').textContent = usuarioActual.codigo;
      document.getElementById('perfilRol').textContent = usuarioActual.rol;
      document.getElementById('ultimoAcceso').textContent = ahora;
      
      document.getElementById('arcoCodigo').textContent = usuarioActual.codigo;
      document.getElementById('arcoRol').textContent = usuarioActual.rol;
      document.getElementById('arcoUltimoAcceso').textContent = ahora;
    }

    function showModule(moduleName) {
      const modules = document.querySelectorAll('.module');
      modules.forEach(m => m.classList.add('hidden'));
      
      const moduleMap = {
        'inicio': 'moduloInicio',
        'perfil': 'moduloPerfil',
        'pagos': 'moduloPagos',
        'aula': 'moduloAula',
        'arco': 'moduloArco'
      };
      
      const targetModule = document.getElementById(moduleMap[moduleName]);
      if (targetModule) {
        targetModule.classList.remove('hidden');
        targetModule.classList.add('fade-in');
        
        if (moduleName === 'arco') {
          goPaso(0);
        }
      }
    }

    function cerrarSesion() {
      if (confirm('Â¿EstÃ¡s seguro de cerrar sesiÃ³n?')) {
        document.getElementById('appScreen').classList.add('hidden');
        document.getElementById('loginScreen').classList.remove('hidden');
        document.getElementById('loginForm').reset();
      }
    }

    // ARCO - Wizard
    function goPaso(num) {
      const steps = document.querySelectorAll('.step');
      const pasos = [
        document.getElementById('paso1'),
        document.getElementById('paso2'),
        document.getElementById('paso3')
      ];
      
      document.getElementById('panelMetricas').classList.add('hidden');
      
      steps.forEach((s, i) => {
        s.classList.remove('active');
        pasos[i].classList.add('hidden');
      });
      
      steps[num].classList.add('active');
      pasos[num].classList.remove('hidden');
      pasos[num].classList.add('fade-in');
      
      if (num === 2) {
        cargarSolicitudes();
      }
    }

    document.getElementById('formSolicitud').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const checkboxes = document.querySelectorAll('.sistemaCb:checked');
      if (checkboxes.length === 0) {
        alert('Debes seleccionar al menos un sistema');
        return;
      }
      
      if (!document.getElementById('aceptoTerminos').checked) {
        alert('Debes aceptar los tÃ©rminos y condiciones');
        return;
      }
      
      solicitudActual.sistemas = [];
      checkboxes.forEach(cb => {
        solicitudActual.sistemas.push({
          nombre: cb.value,
          accion: cb.dataset.accion
        });
      });
      
      solicitudActual.motivo = document.getElementById('motivoSolicitud').value || 'No especificado';
      
      mostrarResumen();
      goPaso(1);
    });

    function mostrarResumen() {
      const resumenDiv = document.getElementById('resumenSistemas');
      resumenDiv.innerHTML = '';
      
      solicitudActual.sistemas.forEach(s => {
        const div = document.createElement('div');
        div.className = 'text-sm p-2 bg-white rounded border';
        div.innerHTML = `<strong>${s.nombre}</strong>: ${s.accion}`;
        resumenDiv.appendChild(div);
      });
      
      document.getElementById('resumenMotivo').textContent = solicitudActual.motivo;
    }

    function enviarSolicitud() {
      const password = document.getElementById('confirmPassword').value;
      
      if (!password) {
        alert('Ingresa tu contraseÃ±a para confirmar');
        return;
      }
      
      const nuevaSolicitud = {
        id: 'ARCO-' + Date.now(),
        fecha: new Date().toLocaleString('es-PE'),
        sistemas: [...solicitudActual.sistemas],
        motivo: solicitudActual.motivo,
        estado: 'En revisiÃ³n',
        progreso: 25
      };
      
      solicitudesArco.push(nuevaSolicitud);
      
      alert('âœ… Solicitud enviada correctamente\n\nNÃºmero de expediente: ' + nuevaSolicitud.id + '\n\nRecibirÃ¡s notificaciones sobre el estado de tu solicitud.');
      
      document.getElementById('formSolicitud').reset();
      document.getElementById('confirmPassword').value = '';
      solicitudActual = { sistemas: [], motivo: '' };
      
      goPaso(2);
    }

    function cargarSolicitudes() {
      const listaDiv = document.getElementById('listaSolicitudes');
      
      if (solicitudesArco.length === 0) {
        listaDiv.innerHTML = '<div class="bg-slate-50 rounded-lg p-4 text-center text-slate-500">No tienes solicitudes previas. Crea una nueva solicitud en el Paso 1.</div>';
        return;
      }
      
      listaDiv.innerHTML = '';
      
      solicitudesArco.forEach(sol => {
        const div = document.createElement('div');
        div.className = 'border border-slate-200 rounded-lg p-4 hover:shadow-md transition';
        
        const estadoColor = sol.estado === 'Completada' ? 'green' : sol.estado === 'En revisiÃ³n' ? 'yellow' : 'blue';
        
        div.innerHTML = `
          <div class="flex items-start justify-between mb-3">
            <div>
              <div class="font-semibold text-lg">${sol.id}</div>
              <div class="text-xs text-slate-500">Fecha: ${sol.fecha}</div>
            </div>
            <div class="px-3 py-1 rounded-full text-xs font-semibold bg-${estadoColor}-100 text-${estadoColor}-700">
              ${sol.estado}
            </div>
          </div>
          
          <div class="mb-3">
            <div class="text-sm font-semibold mb-1">Sistemas:</div>
            <div class="text-xs text-slate-600">
              ${sol.sistemas.map(s => s.nombre).join(', ')}
            </div>
          </div>
          
          <div class="mb-3">
            <div class="flex items-center justify-between text-xs mb-1">
              <span>Progreso</span>
              <span>${sol.progreso}%</span>
            </div>
            <div class="w-full bg-slate-200 rounded-full h-2">
              <div class="bg-blue-600 h-2 rounded-full transition-all" style="width: ${sol.progreso}%"></div>
            </div>
          </div>
          
          <button onclick="verDetalleSolicitud('${sol.id}')" class="text-sm text-blue-600 hover:text-blue-700">
            Ver detalles â†’
          </button>
        `;
        
        listaDiv.appendChild(div);
      });
    }

    function verDetalleSolicitud(id) {
      const sol = solicitudesArco.find(s => s.id === id);
      if (!sol) return;
      
      let detalles = `Expediente: ${sol.id}\n`;
      detalles += `Fecha: ${sol.fecha}\n`;
      detalles += `Estado: ${sol.estado}\n\n`;
      detalles += `Sistemas seleccionados:\n`;
      sol.sistemas.forEach(s => {
        detalles += `â€¢ ${s.nombre}: ${s.accion}\n`;
      });
      detalles += `\nMotivo:\n${sol.motivo}`;
      
      alert(detalles);
    }

    function showPanel() {
      const pasos = document.querySelectorAll('#paso1, #paso2, #paso3');
      pasos.forEach(p => p.classList.add('hidden'));
      
      // Actualizar mÃ©tricas
      const totalSolicitudes = solicitudesArco.length;
      const completadas = solicitudesArco.filter(s => s.estado === 'Completada').length;
      const enProceso = solicitudesArco.filter(s => s.estado === 'En revisiÃ³n' || s.estado === 'En proceso').length;
      
      // Actualizar los valores en el DOM
      document.querySelector('#panelMetricas .bg-blue-50 .text-3xl').textContent = totalSolicitudes;
      document.querySelector('#panelMetricas .bg-green-50 .text-3xl').textContent = completadas;
      document.querySelector('#panelMetricas .bg-yellow-50 .text-3xl').textContent = enProceso;
      
      // Calcular tiempo promedio (opcional - por ahora lo dejamos en N/A)
      const tiempoPromedioDiv = document.querySelector('#panelMetricas .bg-slate-50 .text-2xl');
      if (totalSolicitudes > 0) {
        tiempoPromedioDiv.textContent = '3-5 dÃ­as';
        tiempoPromedioDiv.nextElementSibling.textContent = 'Basado en ' + totalSolicitudes + ' solicitud(es)';
      } else {
        tiempoPromedioDiv.textContent = 'N/A';
        tiempoPromedioDiv.nextElementSibling.textContent = 'AÃºn no hay datos suficientes';
      }
      
      document.getElementById('panelMetricas').classList.remove('hidden');
      document.getElementById('panelMetricas').classList.add('fade-in');
    }

    function hidePanelMetricas() {
      document.getElementById('panelMetricas').classList.add('hidden');
      goPaso(0);
    }
    function guardarCambiosRevision() {
  alert('âœ“ Cambios guardados correctamente');
}

function generarCartaModelo() {
  const carta = `
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CARTA MODELO PARA TERCEROS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

De: ${usuarioActual.nombre}
CÃ³digo: ${usuarioActual.codigo}

Fecha: ${new Date().toLocaleDateString('es-PE')}

Estimado/a [Nombre del destinatario]:

Por medio de la presente, solicito formalmente el ejercicio de mi 
derecho al olvido (ARCO) segÃºn lo establecido en la Ley NÂ° 29733 
- Ley de ProtecciÃ³n de Datos Personales del PerÃº.

DATOS DEL TITULAR:
- Nombre completo: ${usuarioActual.nombre}
- CÃ³digo universitario: ${usuarioActual.codigo}
- Correo: nombre.apellido@undac.edu.pe

SOLICITUD:
Requiero la supresiÃ³n, cancelaciÃ³n o anonimizaciÃ³n de mis datos 
personales que obran en sus sistemas, especÃ­ficamente:

${solicitudActual.sistemas.map(s => `â€¢ ${s.nombre}: ${s.accion}`).join('\n')}

FUNDAMENTO LEGAL:
- Ley NÂ° 29733 - Ley de ProtecciÃ³n de Datos Personales
- Reglamento de la Ley NÂ° 29733 (D.S. NÂ° 003-2013-JUS)
- Directiva de Seguridad de la InformaciÃ³n NÂº 001-2017-JUS/DGTAIPD

Quedo a la espera de su respuesta en el plazo legal de 10 dÃ­as 
hÃ¡biles establecido en la normativa vigente.

Atentamente,

${usuarioActual.nombre}
CÃ³digo: ${usuarioActual.codigo}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  `;
  
  // Crear elemento temporal para descargar
  const blob = new Blob([carta], { type: 'text/plain;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `Carta_Modelo_ARCO_${usuarioActual.codigo}.txt`;
  a.click();
  URL.revokeObjectURL(url);
  
  alert('ğŸ“ Carta modelo generada y descargada');
}

function generarConstancia() {
  if (solicitudesArco.length === 0) {
    alert('âš ï¸ Primero debes enviar una solicitud para generar la constancia');
    return;
  }
  
  const ultimaSolicitud = solicitudesArco[solicitudesArco.length - 1];
  
  const constancia = `
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                       â•‘
â•‘         UNIVERSIDAD NACIONAL DANIEL ALCIDES CARRIÃ“N   â•‘
â•‘                                                       â•‘
â•‘           CONSTANCIA DE EJECUCIÃ“N - ARCO              â•‘
â•‘                                                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Expediente: ${ultimaSolicitud.id}

DATOS DEL SOLICITANTE:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Nombre      : ${usuarioActual.nombre}
CÃ³digo      : ${usuarioActual.codigo}
Rol         : ${usuarioActual.rol}

DETALLE DE LA SOLICITUD:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Sistemas    : ${ultimaSolicitud.sistemas.map(s => s.nombre).join(', ')}
Acciones    : ${ultimaSolicitud.sistemas.map(s => s.accion).join(', ')}
Fecha       : ${ultimaSolicitud.fecha}
Estado      : ${ultimaSolicitud.estado}

CERTIFICACIÃ“N:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
La Universidad Nacional Daniel Alcides CarriÃ³n certifica 
que la presente solicitud ha sido recibida y registrada en 
el Sistema de GestiÃ³n de Datos Personales (ARCO).

Se ha procedido con la ejecuciÃ³n de las acciones solicitadas 
conforme a la Ley NÂ° 29733 - Ley de ProtecciÃ³n de Datos 
Personales del PerÃº y su Reglamento.

Todas las operaciones han sido registradas en la bitÃ¡cora 
de auditorÃ­a del sistema con trazabilidad completa.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Este documento tiene validez legal y puede ser presentado 
ante las autoridades competentes.

Emitido electrÃ³nicamente el: ${new Date().toLocaleString('es-PE')}

Hash de verificaciÃ³n: SHA256-${Math.random().toString(36).substring(2, 15).toUpperCase()}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
           UNDAC - ProtecciÃ³n de Datos Personales
              www.undac.edu.pe | Cerro de Pasco
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  `;
  
  // Crear elemento temporal para descargar
  const blob = new Blob([constancia], { type: 'text/plain;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `Constancia_ARCO_${ultimaSolicitud.id}.txt`;
  a.click();
  URL.revokeObjectURL(url);
  
  alert('ğŸ“œ Constancia generada y descargada\n\nExpediente: ' + ultimaSolicitud.id);
}
function limpiarRectificacion() {
  document.getElementById('rectCorreo').value = '';
  document.getElementById('rectAlias').value = '';
}
  </script>
</body>
</html>
